## ðŸ‘‰ Front-end

### ðŸŽˆ Yarn Berryë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ 
Yarn Berryë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ê¸°ì¡´ì— ì‚¬ìš©í–ˆë˜ npm, yarn v1ì—ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œì ì´ ì¡´ìž¬í•˜ê¸° ë•Œë¬¸ìž…ë‹ˆë‹¤.   

ê¸°ì¡´ì— ì˜ì¡´ì„±ì„ `node_modules`ë¥¼ í†µí•´ ê´€ë¦¬í•˜ì˜€ëŠ”ë° npmì€ íŒ¨í‚¤ì§€ë¥¼ ì°¾ê¸° ìœ„í•´ì„œ ê³„ì† ìƒìœ„ ë””ë ‰í† ë¦¬ì˜ `node_modules` í´ë”ë¥¼ íƒìƒ‰í•©ë‹ˆë‹¤. ë”°ë¼ì„œ íŒ¨í‚¤ì§€ë¥¼ ë°”ë¡œ ì°¾ì§€ ëª»í• ìˆ˜ë¡ readdir, statê³¼ ê°™ì€ ëŠë¦° I/O í˜¸ì¶œì´ ë°˜ë³µë©ë‹ˆë‹¤. ê²½ìš°ì— ë”°ë¼ì„œëŠ” I/O í˜¸ì¶œì´ ì¤‘ê°„ì— ì‹¤íŒ¨í•˜ê¸°ë„ í•©ë‹ˆë‹¤.   

npmì€ íŒ¨í‚¤ì§€ë¥¼ ì°¾ì§€ ëª»í•˜ë©´ ìƒìœ„ ë””ë ‰í† ë¦¬ì˜ `node_modules` í´ë”ë¥¼ ê³„ì† ê²€ìƒ‰í•©ë‹ˆë‹¤. ì´ íŠ¹ì„± ë•Œë¬¸ì— ì–´ë–¤ ì˜ì¡´ì„±ì„ ì°¾ì„ ìˆ˜ ìžˆëŠ”ì§€ëŠ” í•´ë‹¹ íŒ¨í‚¤ì§€ì˜ ìƒìœ„ ë””ë ‰í† ë¦¬ í™˜ê²½ì— ë”°ë¼ ë‹¬ë¼ì§‘ë‹ˆë‹¤.   
ì˜ˆë¥¼ ë“¤ì–´, ìƒìœ„ ë””ë ‰í† ë¦¬ê°€ ì–´ë–¤ `node_modules`ë¥¼ í¬í•¨í•˜ê³  ìžˆëŠ”ì§€ì— ë”°ë¼ ì˜ì¡´ì„±ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìžˆê¸°ë„ í•˜ê³ , ì—†ê¸°ë„ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ ë²„ì „ì˜ ì˜ì¡´ì„±ì„ ìž˜ëª» ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìžˆëŠ” ì—¬ì§€ë„ ì¡´ìž¬í•©ë‹ˆë‹¤.

ë˜í•œ npmì„ êµ¬ì„±í•˜ëŠ” `node_modules` ë””ë ‰í† ë¦¬ êµ¬ì¡°ëŠ” ë§¤ìš° í° ê³µê°„ì„ ì°¨ì§€í•©ë‹ˆë‹¤. `node_modules` í´ë”ëŠ” ë³µìž¡í•˜ê¸° ë•Œë¬¸ì— ì„¤ì¹˜ê°€ ìœ íš¨í•œì§€ ê²€ì¦í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìˆ˜ë°± ê°œì˜ íŒ¨í‚¤ì§€ê°€ ì„œë¡œë¥¼ ì˜ì¡´í•˜ëŠ” ë³µìž¡í•œ ì˜ì¡´ì„± íŠ¸ë¦¬ì—ì„œ `node_modules` ë””ë ‰í† ë¦¬ êµ¬ì¡°ëŠ” ê¹Šì–´ì§‘ë‹ˆë‹¤. ì´ë ‡ê²Œ ê¹Šì€ íŠ¸ë¦¬ êµ¬ì¡°ì—ì„œ ì˜ì¡´ì„±ì´ ìž˜ ì„¤ì¹˜ë˜ì–´ ìžˆëŠ”ì§€ ê²€ì¦í•˜ë ¤ë©´ ë§Žì€ ìˆ˜ì˜ I/O í˜¸ì¶œì´ í•„ìš”í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ë””ìŠ¤í¬ I/O í˜¸ì¶œì€ ë©”ëª¨ë¦¬ì˜ ìžë£Œêµ¬ì¡°ë¥¼ ë‹¤ë£¨ëŠ” ê²ƒë³´ë‹¤ í›¨ì”¬ ëŠë¦½ë‹ˆë‹¤. ì´ëŸ° ë¬¸ì œë¡œ ì¸í•´ yarn v1ì´ë‚˜ npmì€ ê¸°ë³¸ì ì¸ ì˜ì¡´ì„± íŠ¸ë¦¬ì˜ ìœ íš¨ì„±ê¹Œì§€ë§Œ ê²€ì¦í•˜ê³ , ê° íŒ¨í‚¤ì§€ì˜ ë‚´ìš©ì´ ì˜¬ë°”ë¥¸ì§€ëŠ” í™•ì¸í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.   

ê·¸ë¦¬ê³  npm ë° yarn v1ì—ì„œëŠ” ì¤‘ë³µí•´ì„œ ì„¤ì¹˜ë˜ëŠ” `node_modules`ë¥¼ ì•„ë¼ê¸° ìœ„í•´ ëŒì–´ì˜¬ë¦¬ê¸°(Hoisting) ê¸°ë²•ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ëŒì–´ì˜¬ë¦¬ê¸°ì— ë”°ë¼ ì§ì ‘ ì˜ì¡´í•˜ê³  ìžˆì§€ ì•Šì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ require() í•  ìˆ˜ ìžˆëŠ” í˜„ìƒì„ ìœ ë ¹ ì˜ì¡´ì„±(Phantom Dependency)ì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤. ìœ ë ¹ ì˜ì¡´ì„± í˜„ìƒì´ ë°œìƒí•  ë•Œ, package.jsonì— ëª…ì‹œí•˜ì§€ ì•Šì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¡°ìš©ížˆ ì‚¬ìš©í•  ìˆ˜ ìžˆê²Œ ë©ë‹ˆë‹¤.   

yarn berryëŠ” ìœ„ì—ì„œ ì–¸ê¸‰í•œ ë¬¸ì œë¥¼ Plugâ€™nâ€™Play (PnP) ë°©ë²•ì„ í†µí•´ í•´ê²°í•©ë‹ˆë‹¤.   
yarn berryëŠ” `node_modules`ë¥¼ ìƒì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  `.yarn/cache` í´ë”ì— ì˜ì¡´ì„±ì˜ ì •ë³´ê°€ ì €ìž¥ë˜ê³ , `.pnp.cjs` íŒŒì¼ì— ì˜ì¡´ì„±ì„ ì°¾ì„ ìˆ˜ ìžˆëŠ” ì •ë³´ê°€ ê¸°ë¡ë©ë‹ˆë‹¤. `.pnp.cjs`ë¥¼ ì´ìš©í•˜ë©´ ë””ìŠ¤í¬ I/O ì—†ì´ ì–´ë–¤ íŒ¨í‚¤ì§€ê°€ ì–´ë–¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì˜ì¡´í•˜ëŠ”ì§€, ê° ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì–´ë””ì— ìœ„ì¹˜í•˜ëŠ”ì§€ë¥¼ ë°”ë¡œ ì•Œ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.   

yarn berryì˜ PnP ì‹œìŠ¤í…œì—ì„œ ê° ì˜ì¡´ì„±ì€ zip ì•„ì¹´ì´ë¸Œë¡œ ê´€ë¦¬ë©ë‹ˆë‹¤. ì´í›„ `.pnp.cjs` íŒŒì¼ì´ ì§€ì •í•˜ëŠ” ë°”ì— ë”°ë¼ ë™ì ìœ¼ë¡œ zip ì•„ì¹´ì´ë¸Œì˜ ë‚´ìš©ì´ ì°¸ì¡°ë©ë‹ˆë‹¤. zip ì•„ì¹´ì´ë¸Œë¡œ ì˜ì¡´ì„±ì„ ê´€ë¦¬í•˜ë©´ ë” ì´ìƒ `node_modules` ë””ë ‰í† ë¦¬ êµ¬ì¡°ë¥¼ ìƒì„±í•  í•„ìš”ê°€ ì—†ê¸° ë•Œë¬¸ì— ì„¤ì¹˜ê°€ ì‹ ì†ížˆ ì™„ë£Œë˜ê³ , ê° íŒ¨í‚¤ì§€ëŠ” ë²„ì „ë§ˆë‹¤ í•˜ë‚˜ì˜ zip ì•„ì¹´ì´ë¸Œë§Œì„ ê°€ì§€ê¸° ë•Œë¬¸ì— ì¤‘ë³µí•´ì„œ ì„¤ì¹˜ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì˜ì¡´ì„±ì„ êµ¬ì„±í•˜ëŠ” íŒŒì¼ì˜ ìˆ˜ê°€ ë§Žì§€ ì•Šìœ¼ë¯€ë¡œ, ë³€ê²½ ì‚¬í•­ì„ ê°ì§€í•˜ê±°ë‚˜ ì „ì²´ ì˜ì¡´ì„±ì„ ì‚­ì œí•˜ëŠ” ìž‘ì—…ì´ ë¹ ë¦…ë‹ˆë‹¤.   

yarn PnPëŠ” `node_modules`ì—ì„œì™€ ê°™ì´ ì˜ì¡´ì„±ì„ ëŒì–´ì˜¬ë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ë¡œì¨ ê° íŒ¨í‚¤ì§€ë“¤ì€ ìžì‹ ì´ `package.json`ì— ê¸°ìˆ í•˜ëŠ” ì˜ì¡´ì„±ì—ë§Œ ì ‘ê·¼í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ê¸°ì¡´ì— í™˜ê²½ì— ë”°ë¼ ìš°ì—°ížˆ ìž‘ë™í•  ìˆ˜ ìžˆì—ˆë˜ ì½”ë“œë“¤ì´ ë³´ë‹¤ ì—„ê²©ížˆ ê´€ë¦¬ë˜ëŠ” ê²ƒìž…ë‹ˆë‹¤. ì´ë¡œì¨ ì˜ˆê¸°ì¹˜ ëª»í•œ ë²„ê·¸ë¥¼ ì‰½ê²Œ ì¼ìœ¼í‚¤ë˜ ìœ ë ¹ ì˜ì¡´ì„± í˜„ìƒì„ ê·¼ë³¸ì ìœ¼ë¡œ ë§‰ì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.    

yarn PnPì€ ì˜ì¡´ì„±ì„ ì••ì¶• íŒŒì¼ë¡œ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— ì˜ì¡´ì„±ì˜ ìš©ëŸ‰ì´ ìž‘ìŠµë‹ˆë‹¤. ë˜í•œ ê° ì˜ì¡´ì„±ì€ í•˜ë‚˜ì˜ zip íŒŒì¼ë¡œë§Œ í‘œí˜„ë˜ê¸° ë•Œë¬¸ì— ì˜ì¡´ì„±ì„ êµ¬ì„±í•˜ëŠ” íŒŒì¼ì˜ ìˆ«ìžê°€ npmë§Œí¼ ë§Žì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ì²˜ëŸ¼ ìš©ëŸ‰ê³¼ íŒŒì¼ì˜ ìˆ«ìžê°€ ì ê¸° ë•Œë¬¸ì— yarn berryë¥¼ ì‚¬ìš©í•˜ë©´ ì˜ì¡´ì„±ì„ Gitìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ yarn berryì—ì„œ ì˜ì¡´ì„±ì„ ë²„ì „ ê´€ë¦¬ì— í¬í•¨í•˜ëŠ” ê²ƒì„ Zero-Installì´ë¼ê³  í•©ë‹ˆë‹¤.   

ì´ì²˜ëŸ¼ ì˜ì¡´ì„±ì„ ë²„ì „ ê´€ë¦¬ì— í¬í•¨í•˜ë©´ ìƒˆë¡œ ì €ìž¥ì†Œë¥¼ ë³µì œí•˜ê±°ë‚˜ ë¸Œëžœì¹˜ë¥¼ ë°”ê¾¸ì—ˆë‹¤ê³  í•´ì„œ yarn installì„ ì‹¤í–‰í•˜ì§€ ì•Šì•„ë„ ë˜ê³  ì´ì— ë”°ë¼ CIì—ì„œ ì˜ì¡´ì„± ì„¤ì¹˜í•˜ëŠ” ì‹œê°„ì„ í¬ê²Œ ì ˆì•½í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

> https://toss.tech/article/node-modules-and-yarn-berry
