<!doctype html>
<html lang="ko" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-react/redux-vs-react-query/README" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">🤔 Topic: SWR 또는 React Query와 같은 라이브러리가 나타나게 된 배경 및 원인 | Front-end Tech Interview</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://saseungmin.github.io/frontend-tech-interview/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://saseungmin.github.io/frontend-tech-interview/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://saseungmin.github.io/frontend-tech-interview/docs/react/redux-vs-react-query"><meta data-rh="true" property="og:locale" content="ko"><meta data-rh="true" name="docusaurus_locale" content="ko"><meta data-rh="true" name="docsearch:language" content="ko"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="🤔 Topic: SWR 또는 React Query와 같은 라이브러리가 나타나게 된 배경 및 원인 | Front-end Tech Interview"><meta data-rh="true" name="description" content="🎈 Why I Stopped Using Redux"><meta data-rh="true" property="og:description" content="🎈 Why I Stopped Using Redux"><link data-rh="true" rel="icon" href="/frontend-tech-interview/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://saseungmin.github.io/frontend-tech-interview/docs/react/redux-vs-react-query"><link data-rh="true" rel="alternate" href="https://saseungmin.github.io/frontend-tech-interview/docs/react/redux-vs-react-query" hreflang="ko"><link data-rh="true" rel="alternate" href="https://saseungmin.github.io/frontend-tech-interview/docs/react/redux-vs-react-query" hreflang="x-default"><link rel="stylesheet" href="/frontend-tech-interview/assets/css/styles.803d6110.css">
<script src="/frontend-tech-interview/assets/js/runtime~main.22331737.js" defer="defer"></script>
<script src="/frontend-tech-interview/assets/js/main.7115b0a8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="본문으로 건너뛰기"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">본문으로 건너뛰기</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/frontend-tech-interview/"><div class="navbar__logo"><img src="/frontend-tech-interview/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/frontend-tech-interview/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Front-end Tech Interview</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/frontend-tech-interview/docs">Questions</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/saseungmin/frontend-tech-interview" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="어두운 모드와 밝은 모드 전환하기 (현재 밝은 모드)" aria-label="어두운 모드와 밝은 모드 전환하기 (현재 밝은 모드)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="맨 위로 스크롤하기" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/frontend-tech-interview/docs">🎉 Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/frontend-tech-interview/docs/TestAndTDD">👉 Test와 TDD에 대한 정리</a><button aria-label="Expand sidebar category &#x27;👉 Test와 TDD에 대한 정리&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/frontend-tech-interview/docs/article">👉 프론트엔드 어머 이건 봐야해!</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/frontend-tech-interview/docs/css">👉 CSS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/frontend-tech-interview/docs/front-end">👉 Front-end</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/frontend-tech-interview/docs/html">👉 HTML</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/frontend-tech-interview/docs/javascript">👉 JavaScript</a><button aria-label="Expand sidebar category &#x27;👉 JavaScript&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/frontend-tech-interview/docs/liftIO-2021">👉 Functional Programming Conference LiftIO 2021</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/frontend-tech-interview/docs/network">👉 Network</a><button aria-label="Expand sidebar category &#x27;👉 Network&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/frontend-tech-interview/docs/react">👉 React</a><button aria-label="Collapse sidebar category &#x27;👉 React&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/frontend-tech-interview/docs/react/question">질문 리스트</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/frontend-tech-interview/docs/react/react-18">👉 React 18 변경점</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/frontend-tech-interview/docs/react/react-19">👉 React 19</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/frontend-tech-interview/docs/react/react-clean-architecture">👉 React Architecture 및 패턴과 관련된 아티클</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/frontend-tech-interview/docs/react/react-fiber-architecture">👉 React Fiber Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/frontend-tech-interview/docs/react/react-official-docs">React 공식문서 필요한 부분 정리</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/frontend-tech-interview/docs/react/react-rendering">React 렌더링이 진화의 과정</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/frontend-tech-interview/docs/react/reconciliation">재조정 (Reconciliation)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/frontend-tech-interview/docs/react/redux-vs-react-query">🤔 Topic: SWR 또는 React Query와 같은 라이브러리가 나타나게 된 배경 및 원인</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/frontend-tech-interview/docs/react/when-to-useMemo-and-useCallback">When to useMemo and useCallback</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/frontend-tech-interview/docs/typescript">👉 TypeScript</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/frontend-tech-interview/docs/web">👉 Web</a><button aria-label="Expand sidebar category &#x27;👉 Web&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="홈" class="breadcrumbs__link" href="/frontend-tech-interview/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/frontend-tech-interview/docs/react"><span itemprop="name">👉 React</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">🤔 Topic: SWR 또는 React Query와 같은 라이브러리가 나타나게 된 배경 및 원인</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">이 페이지에서</button></div><div class="theme-doc-markdown markdown"><h1>🤔 Topic: SWR 또는 React Query와 같은 라이브러리가 나타나게 된 배경 및 원인</h1>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-why-i-stopped-using-redux">🎈 <a href="https://dev.to/g_abud/why-i-quit-redux-1knl" target="_blank" rel="noopener noreferrer">Why I Stopped Using Redux</a><a href="#-why-i-stopped-using-redux" class="hash-link" aria-label="-why-i-stopped-using-redux에 대한 직접 링크" title="-why-i-stopped-using-redux에 대한 직접 링크">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="the-problem-with-single-page-applications">The Problem with Single Page Applications<a href="#the-problem-with-single-page-applications" class="hash-link" aria-label="The Problem with Single Page Applications에 대한 직접 링크" title="The Problem with Single Page Applications에 대한 직접 링크">​</a></h4>
<p>데이터를 비동기식으로 가져오는 것은 이제 데이터가 프런트엔드와 백엔드의 두 위치에 있어야 한다는 것을 의미했습니다.<br>
<!-- -->네트워크 대기 시간을 줄이기 위해 데이터 캐시를 유지하면서 모든 구성 요소에서 사용할 수 있도록 해당 데이터를 전역적으로 저장하는 최선의 방법을 생각해야 합니다.<br>
<!-- -->프론트엔드 개발의 큰 부분은 이제 state bugs, <a href="https://redux.js.org/usage/structuring-reducers/normalizing-state-shape#normalizing-state-shape" target="_blank" rel="noopener noreferrer">데이터 비정규화</a> 및 오래된 데이터로 고통받지 않고 글로벌 store를 유지하는 방법에 대한 부담이 됩니다. (A big part of frontend development now becomes burdened with how to maintain our global store without suffering from state bugs, data denormalization, and stale data.)</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="redux-is-not-a-cache">Redux is not a Cache<a href="#redux-is-not-a-cache" class="hash-link" aria-label="Redux is not a Cache에 대한 직접 링크" title="Redux is not a Cache에 대한 직접 링크">​</a></h4>
<p>Redux 및 유사한 상태 관리 라이브러리를 사용할 때 우리 대부분이 겪는 주요 문제는 백엔드 상태에 대한 캐시로 취급한다는 것입니다. 우리는 데이터를 가져오고, reducer/action을 사용하여 스토어에 추가하고, 최신 상태인지 확인하기 위해 주기적으로 다시 가져옵니다. 우리는 Redux가 너무 많은 일을 하도록 만들고 이를 우리 문제에 대한 포괄적인 솔루션으로 사용하고 있습니다.</p>
<p>기억해야 할 한 가지 중요한 점은 프론트엔드와 백엔드 상태가 결코 실제로 동기화되지 않는다는 것입니다. 기껏해야 그들이 있는 신기루(mirage)를 만들 수 있습니다. 이것은 클라이언트-서버 모델 의 단점 중 하나이며 처음에 캐시가 필요한 이유입니다. 그러나 동기화 상태를 캐싱하고 유지하는 것은 매우 복잡하므로 Redux가 권장하는 것처럼 이 백엔드 상태를 처음부터 다시 생성해서는 안 됩니다.</p>
<p>프론트엔드에서 데이터베이스를 재생성하기 시작하면 백엔드와 프론트엔드 책임 간의 경계가 빠르게 흐려집니다. 프론트엔드 개발자로서 우리는 간단한 UI를 만들기 위해 <a href="https://redux.js.org/usage/structuring-reducers/normalizing-state-shape#relationships-and-tables" target="_blank" rel="noopener noreferrer">Relationships and Tables</a> 대한 완전한 지식을 가질   필요가 없습니다 . 또한 <a href="https://redux.js.org/usage/structuring-reducers/normalizing-state-shape#normalizing-nested-data" target="_blank" rel="noopener noreferrer">데이터를 정규화하는 최적의 방법</a>을 알 필요가 없습니다. 그 책임은 테이블을 직접 디자인하는 사람들, 즉 백엔드 개발자에게 있습니다. 그러면 백엔드 개발자는 문서화된 API 형태로 프론트엔드 개발자에게 추상화를 제공할 수 있습니다.</p>
<p>프론트엔드 코드에서 백엔드 상태 관리를 중단하고 대신 주기적으로 업데이트해야 하는 캐시처럼 취급하면 어떻게 될까요? 프론트엔드를 캐시에서 읽는 단순한 디스플레이 레이어처럼 취급함으로써 우리의 코드는 작업하기가 훨씬 더 쉬워지고 순수한 프론트엔드 개발자가 더 쉽게 액세스할 수 있습니다.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-a-simpler-approach-to-backend-state">🎈 A Simpler Approach to Backend State<a href="#-a-simpler-approach-to-backend-state" class="hash-link" aria-label="🎈 A Simpler Approach to Backend State에 대한 직접 링크" title="🎈 A Simpler Approach to Backend State에 대한 직접 링크">​</a></h4>
<ol>
<li>React Query</li>
<li>SWR</li>
<li>Apollo Client</li>
</ol>
<p>참고: <a href="https://react-query.tanstack.com/comparison" target="_blank" rel="noopener noreferrer">Comparison | React Query vs SWR vs Apollo vs RTK Query</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-how-and-why-you-should-use-react-query">🎈 How and Why You Should Use React Query<a href="#-how-and-why-you-should-use-react-query" class="hash-link" aria-label="🎈 How and Why You Should Use React Query에 대한 직접 링크" title="🎈 How and Why You Should Use React Query에 대한 직접 링크">​</a></h3>
<p>React로 애플리케이션을 구축할 때 직면하는 문제 중 하나는 서버에서 데이터를 가져오기 위한 코드 패턴을 결정하는 것입니다. React에서 데이터 가져오기를 처리하는 가장 일반적인 방법은 global state를 가져오기 작업의 현재 상태를 결정하는 메커니즘으로 사용하는 것입니다.</p>
<p>다음은 Star Wars API에서 데이터를 가져오는 예입니다.</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports">useState</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> useEffect</span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">axios</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;axios&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// regular fetch with axios</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">App</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">isLoading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setLoading</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">isError</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setError</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setData</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">fetchData</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setLoading</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">axios</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;http://swapi.dev/api/people/1/&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">setData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">setError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setLoading</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">fetchData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">App</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">React Query example with Star Wars API</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">isError </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Something went wrong ...</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">isLoading </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Loading ...</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">pre</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">pre</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token maybe-class-name">App</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>위의 코드는 데이터를 저장하고 애플리케이션이 데이터를 fetching하고 있는지와 이미 API에서 오류 응답을 받았는지, 데이터를 저장하는 세 가지의 다른 state가 필요하고 <code>useState</code>와 <code>useEffect</code> hooks 둘다 필요합니다.</p>
<p>그뿐만이 아니라, React에서 데이터 fetching과 관련된 가장 일반적인 문제는 다음과 같습니다.</p>
<ol>
<li>데이터는 모든 앱 인스턴스에서 공유되며 다른 사람이 변경할 수 있습니다.(Data is shared across all app instance and can be changed by other people.)</li>
<li>데이터가 &quot;stale&quot;일 수 있으며 새로 고쳐야 합니다. (Data could be “stale” and needs to be refreshed.)</li>
<li>요청 작업을 최적화하기 위해 데이터 캐싱 및 데이터 무효화 처리 (Handle caching and invalidating data to optimize the request operation.)</li>
</ol>
<p>마지막으로, API에서 가져온 데이터를 보유하는 remote state와 결합된 <em>테마</em> 및 <em>사이드바</em> 구성과 같은 사용자의 기본 설정을 일반적으로 저장하는 local state를 갖는 문제도 있습니다. (Finally, there is also the problem of having the local state which commonly stores your user’s preferences like theme and sidebar config coupled with the remote state which holds the data fetched from API)</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//what global state commonly look like nowadays</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> state </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// local state</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">theme</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;light&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">sidebar</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;off&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// remote state</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">followers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">following</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">userProfile</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">messages</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">todos</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>local state와 remote state를 분리할 수 있다면 좋지 않을까요? data fetching위해 작성해야 하는 boilerplate 코드의 양을 줄일 수 있다면 어떨까요?</p>
<p>One solution would be to create your own custom hook to handle fetching and handling of data. That’s a completely valid solution.</p>
<p>Another solution and one that we’ll be exploring here in-depth is <a href="https://react-query.tanstack.com/" target="_blank" rel="noopener noreferrer">React Query</a>. 이 라이브러리는 두 개의 간단한 Hooks와 하나의 유틸리티 기능을 제공하여 작성해야 하는 코드의 양을 줄이는 동시에 remote data를 가져오고(fetch), 동기화하고(synchronize), 업데이트하고(update), 캐시하는(cache) 데 도움이 줍니다.</p>
<p>For example, let’s refactor the Star Wars API example above:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">axios</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;axios&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports">useQuery</span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react-query&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// react-query fetch with axios</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">App</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> isLoading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;fetchLuke&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">axios</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;http://swapi.dev/api/people/1/&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;App&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">h1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token maybe-class-name">React</span><span class="token plain"> </span><span class="token maybe-class-name">Query</span><span class="token plain"> example </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> star wars </span><span class="token constant" style="color:#36acaa">API</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">h1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">error </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token maybe-class-name">Something</span><span class="token plain"> went wrong </span><span class="token spread operator" style="color:#393A34">...</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">isLoading </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token maybe-class-name">Retrieving</span><span class="token plain"> </span><span class="token maybe-class-name">Luke</span><span class="token plain"> </span><span class="token maybe-class-name">Skywalker</span><span class="token plain"> </span><span class="token maybe-class-name">Information</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">pre</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">pre</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token maybe-class-name">App</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Conclusion에 대한 직접 링크" title="Conclusion에 대한 직접 링크">​</a></h4>
<p>React Query는 remote data를 global state에 넣을 필요를 완전히 없애주는 데이터 요청 관리를 위한 훌륭한 hook 라이브러리입니다. <strong>데이터를 가져와야 하는 위치를 라이브러리에 알려 주기만 ​​하면</strong> 추가 코드나 구성 없이 캐싱, 백그라운드 업데이트 및 오래된 데이터를 처리합니다. (You just need to tell the library where you need to fetch your data, and it will handle caching, background updates, and stale data without any extra code or configuration.)</p>
<p>또한 React Query는 <code>useState</code>및 <code>useEffect</code> hooks의 필요성을 제거하고 몇 줄의 React Query 로직으로 대체합니다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-does-react-query-replace-redux-mobx-or-other-global-state-managers">🎈 <a href="https://react-query.tanstack.com/guides/does-this-replace-client-state" target="_blank" rel="noopener noreferrer">Does React Query replace Redux, MobX or other global state managers?</a><a href="#-does-react-query-replace-redux-mobx-or-other-global-state-managers" class="hash-link" aria-label="-does-react-query-replace-redux-mobx-or-other-global-state-managers에 대한 직접 링크" title="-does-react-query-replace-redux-mobx-or-other-global-state-managers에 대한 직접 링크">​</a></h3>
<ul>
<li>React Query는 서버와 클라이언트 간의 비동기 작업을 관리 하는 Server-State 라이브러리입니다.</li>
<li>Redux, MobX, Zusstand 등은 <em>비동기 데이터를 저장하는 데 사용할 수 있는</em> Client-State 라이브러리이지만 <em>React Query와 같은 도구와 비교할 때 비효율적</em>입니다.</li>
</ul>
<p>이러한 점을 염두에 두고 짧은 대답은 React Query가 Client-State의 캐시 데이터를 관리하는 데 사용되는 보일러플레이트 코드 및 관련 wiring 캐시 데이터를 몇 줄의 코드로 대체한다는 것입니다.</p>
<blockquote>
<p>응용 프로그램이 실제로 엄청난 양의 동기 클라이언트 전용 상태(예: 비주얼 디자이너 또는 음악 제작 응용 프로그램)를 가질 수 있는 상황이 여전히 있으며, 이 경우 여전히 Client-State 관리자가 필요할 것입니다. 이 상황에서 <strong>React Query는 local/Client State 관리를 대체하지 않는다는 점에 유의하는 것이 중요합니다.</strong> 그러나 문제가 없는 대부분의 클라이언트 상태 관리자와 함께 React Query를 사용할 수 있습니다.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-리덕스-잘-쓰고-계시나요">🎈 <a href="https://ridicorp.com/story/how-to-use-redux-in-ridi/" target="_blank" rel="noopener noreferrer">리덕스 잘 쓰고 계시나요?</a><a href="#-리덕스-잘-쓰고-계시나요" class="hash-link" aria-label="-리덕스-잘-쓰고-계시나요에 대한 직접 링크" title="-리덕스-잘-쓰고-계시나요에 대한 직접 링크">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="api요청은-이제-react-query-swr에게-맡기자">API요청은 이제 react-query, SWR에게 맡기자<a href="#api요청은-이제-react-query-swr에게-맡기자" class="hash-link" aria-label="API요청은 이제 react-query, SWR에게 맡기자에 대한 직접 링크" title="API요청은 이제 react-query, SWR에게 맡기자에 대한 직접 링크">​</a></h4>
<p>리덕스로 요청에 관련된 상태를 관리하려면 요청 시작, 요청 성공, 요청 실패에 대한 3가지 액션들을 준비해야 하고 해당 액션들을 처리하는 로직들도 준비해줘야 한다. (ex. <code>getEpisode</code>, <code>getEpisodeSuccess</code>, <code>getEpisodeError</code>)</p>
<p>2020년에는 react-query와 SWR 라는 라이브러리들이 릴리즈되었다. 두 라이브러리 모두, Hook을 사용하여 API 요청 상태를 관리하고, 또 캐시 관리도 아주 멋지게 해낸다.</p>
<p>SWR은 Next.js를 만든 Vercel팀에서 만든 것이기에 서버사이드 렌더링을 하는 경우 Next.js 와 함께 사용해야한다 (적어도 공식 문서에서는 해당 내용만 다룬다.).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="그럼에도-리덕스-미들웨어는-필요할까">그럼에도 리덕스 미들웨어는 필요할까?<a href="#그럼에도-리덕스-미들웨어는-필요할까" class="hash-link" aria-label="그럼에도 리덕스 미들웨어는 필요할까?에 대한 직접 링크" title="그럼에도 리덕스 미들웨어는 필요할까?에 대한 직접 링크">​</a></h4>
<p>특정 기능들은 미들웨어의 힘을 빌렸을 때 더욱 쉽게 개발 할 수 있다. 웹에선 redux-saga, 모바일 앱에서는 redux-observable을 사용할 때 다음과 같은 상황에 유용하게 사용할 수 있다.</p>
<p>첫번째 상황은 <strong>요청을 연달아서 여러번 하게 될 때 이전 요청은 무시하도록 하고 맨 마지막의 요청만 처리하도록 할 때</strong> 로 이러한 상황엔 redux-saga 에선 <code>takeLatest</code>, redux-observable 에선 <code>switchMap</code> 을 사용하면 아주 쉽게 마지막 요청에 대한 응답만 처리하도록 구현을 할 수 있다.</p>
<p>두번째 상황은 첫번째 상황와 꽤나 비슷한건데 <strong>특정 조건이 만족됐을 때 이전에 시작한 요청을 취소하는 상황</strong>이다.</p>
<p>세번째 상황은 <strong>특정 콜백함수를 원하는 액션이 디스패치 됐을 때 호출하도록 등록을 하는 상황</strong>이다.</p>
<p>네번째 상황은 <strong>컴포넌트 밖에서 어떤 작업을 수행할 때</strong> 이다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-react-query-살펴보기">🎈 <a href="https://maxkim-j.github.io/posts/react-query-preview" target="_blank" rel="noopener noreferrer">React Query 살펴보기</a><a href="#-react-query-살펴보기" class="hash-link" aria-label="-react-query-살펴보기에 대한 직접 링크" title="-react-query-살펴보기에 대한 직접 링크">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="react-query가-만들어진-동기">React Query가 만들어진 동기<a href="#react-query가-만들어진-동기" class="hash-link" aria-label="React Query가 만들어진 동기에 대한 직접 링크" title="React Query가 만들어진 동기에 대한 직접 링크">​</a></h4>
<p>React 자체가 데이터를 패칭해오거나 업데이트 하는 옵션을 제공하지 않기 때문에 원래 React 개발자들은 각자의 방식으로 http 통신 로직을 짜야 했다.</p>
<p>Redux 같은 전역 상태관리 라이브러리들이 클라이언트 상태값에 대해서는 잘 작 동하지만, 서버 상태에 대해서는 그렇게 잘 작동하지 않는다. Server State는 Client State와 완전 다르기 때문이다.</p>
<ul>
<li>서버 데이터는 항상 최신 상태임을 보장하지 않는다. 명시적으로 fetching을 수행해야만 최신 데이터로 전환된다.</li>
<li>네트워크 통신은 최소한으로 줄이는게 좋은데, 복수의 컴포넌트에서 최신 데이터를 받아오기 위해 fetching을 여러번 수행하는 낭비가 발생할 수 있다.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="좋아보이는-점">좋아보이는 점<a href="#좋아보이는-점" class="hash-link" aria-label="좋아보이는 점에 대한 직접 링크" title="좋아보이는 점에 대한 직접 링크">​</a></h4>
<ul>
<li>비동기 관련한 타이핑이 정말 많이 줄어든다</li>
<li>Redux같은 전역 상태 저장소의 store에 동기적으로 업데이트되는 데이터와 액션만 남길 수 있어 크기를 줄이고, Saga는 아예 대체해버린다.</li>
<li>캐싱과 리패칭을 개발자가 구현하지 않아도 알아서 지원한다.</li>
<li>풍부한 옵션을 제공해 굉장히 많은 부분에서 custom이 가능하다.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-참고-링크">📌 참고 링크<a href="#-참고-링크" class="hash-link" aria-label="📌 참고 링크에 대한 직접 링크" title="📌 참고 링크에 대한 직접 링크">​</a></h3>
<ul>
<li><a href="https://ridicorp.com/story/how-to-use-redux-in-ridi/" target="_blank" rel="noopener noreferrer">리덕스 잘 쓰고 계시나요?</a></li>
<li><a href="https://react-query.tanstack.com/guides/does-this-replace-client-state" target="_blank" rel="noopener noreferrer">Does React Query replace Redux, MobX or other global state managers?</a></li>
<li><a href="https://blog.bitsrc.io/how-to-start-using-react-query-4869e3d5680d" target="_blank" rel="noopener noreferrer">How and Why You Should Use React Query</a></li>
<li><a href="https://maxkim-j.github.io/posts/react-query-preview" target="_blank" rel="noopener noreferrer">React Query 살펴보기</a></li>
<li><a href="https://blog.rhostem.com/posts/2021-02-01T00:00:00.000Z" target="_blank" rel="noopener noreferrer">React Query로 서버 상태 관리하기</a></li>
<li><a href="https://dev.to/g_abud/why-i-quit-redux-1knl" target="_blank" rel="noopener noreferrer">Why I Stopped Using Redux</a></li>
<li><a href="https://ko.wikipedia.org/wiki/CAP_%EC%A0%95%EB%A6%AC" target="_blank" rel="noopener noreferrer">CAP 정리</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/saseungmin/frontend-tech-interview/tree/main/docs/react/redux-vs-react-query/README.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>페이지 편집</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="문서 페이지"><a class="pagination-nav__link pagination-nav__link--prev" href="/frontend-tech-interview/docs/react/reconciliation"><div class="pagination-nav__sublabel">이전</div><div class="pagination-nav__label">재조정 (Reconciliation)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/frontend-tech-interview/docs/react/when-to-useMemo-and-useCallback"><div class="pagination-nav__sublabel">다음</div><div class="pagination-nav__label">When to useMemo and useCallback</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-why-i-stopped-using-redux" class="table-of-contents__link toc-highlight">🎈 Why I Stopped Using Redux</a></li><li><a href="#-how-and-why-you-should-use-react-query" class="table-of-contents__link toc-highlight">🎈 How and Why You Should Use React Query</a></li><li><a href="#-does-react-query-replace-redux-mobx-or-other-global-state-managers" class="table-of-contents__link toc-highlight">🎈 Does React Query replace Redux, MobX or other global state managers?</a></li><li><a href="#-리덕스-잘-쓰고-계시나요" class="table-of-contents__link toc-highlight">🎈 리덕스 잘 쓰고 계시나요?</a></li><li><a href="#-react-query-살펴보기" class="table-of-contents__link toc-highlight">🎈 React Query 살펴보기</a></li><li><a href="#-참고-링크" class="table-of-contents__link toc-highlight">📌 참고 링크</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/frontend-tech-interview/docs/article">Questions</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/saseungmin" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 saseungmin. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>