# ðŸ‘‰ React Native

## â“ React Native old architectureì˜ ì–´ë– í•œ ë¬¸ì œ ë–„ë¬¸ì— new architectureê°€ ë‚˜ì˜¤ê²Œ ë˜ì—ˆë‚˜?
ê¸°ì¡´ì— react nativeì˜ old architectureëŠ” bridge í†µì‹ ì˜ ê·¼ë³¸ì ì¸ í•œê³„ê°€ ìžˆì—ˆìŠµë‹ˆë‹¤.   
javascriptì™€ native ë ˆì´ì–´ ê°„ì— ëª¨ë“  í†µì‹ ì´ bridgeë¼ëŠ” ì¤‘ê°„ ë§¤ê°œì²´ë¥¼ í†µí•´ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ì˜€ëŠ”ë° javascript ë ˆì´ì–´ê°€ ë°ì´í„°ë¥¼ bridgeë¡œ ë³´ë‚´ê³  native ë ˆì´ì–´ëŠ” ì´ ì²˜ë¦¬ë¥¼ ê¸°ë‹¤ë ¤ì•¼ í•©ë‹ˆë‹¤.   
ì´ë¡œ ì¸í•´ì„œ ë¶ˆí•„ìš”í•œ ì§€ì—°ì´ ë°œìƒí•˜ê³  ë°˜ì‘ì„±ì´ ë–¨ì–´ì§€ê²Œ ë˜ëŠ” ë¬¸ì œê°€ ìžˆì—ˆìŠµë‹ˆë‹¤.   

ë˜í•œ, bridgeë¥¼ í†µê³¼í• ë•Œ ëª¨ë“  ë°ì´í„°ëŠ” JSON í˜•íƒœë¡œ ì§ë ¬í™”ë˜ì–´ì•¼í•˜ëŠ”ë° ë³µìž¡í•œ javascript ê°ì²´ë¥¼ ë¬¸ìžì—´ë¡œ ë³€í™˜ë˜ê³  ì „ì†¡ë˜ê³  ë‹¤ì‹œ íŒŒì‹±í•˜ëŠ” ê³¼ì •ì—ì„œ ì„±ëŠ¥ì´ ì†ì‹¤ë©ë‹ˆë‹¤.   
ì´ëŸ¬í•œ ë¬¸ì œ ë•Œë¬¸ì— ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ì‹œ ì§ë ¬í™”/ì—­ì§ë ¬í™” ê³¼ì •ì—ì„œ ì‹¬ê°í•œ ë³‘ëª© í˜„ìƒì´ ë°œìƒí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.   

ê·¸ë¦¬ê³  ìŠ¤ë ˆë“œ ë° ì„±ëŠ¥ ë¬¸ì œë„ ì¡´ìž¬í–ˆëŠ”ë°, bridgeê°€ ë‹¨ì¼ ìŠ¤ë ˆë“œë¡œ ë™ìž‘í•˜ì—¬ ê³¼ë¶€í•˜ ì‹œ ë³‘ëª© í˜„ìƒì´ ë°œìƒí•˜ì—¬ ë§Žì€ ë°ì´í„°ê°€ bridgeë¥¼ í†µê³¼í•  ë•Œ ì§ë ¬í™” ëŒ€ê¸° ìƒí™©ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.   

ë˜í•œ, UI ë Œë”ë§ ì§€ì—° ë¬¸ì œë„ ìžˆì—ˆëŠ”ë°, ë¹ ë¥¸ ìŠ¤í¬ë¡¤ ì‹œ JavaScriptì™€ Native ê°„ ë¹„ë™ê¸° í†µì‹ ìœ¼ë¡œ ì¸í•œ ë¹ˆ ê³µê°„ í‘œì‹œê°€ ë˜ëŠ” ë¬¸ì œê°€ ìžˆì—ˆê³ , íŠ¹ížˆ ê¸´ ë¦¬ìŠ¤íŠ¸ì—ì„œ ë§Žì€ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•  ë•Œ ì„±ëŠ¥ ì €í•˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.   

bridgeì˜ ë‹¨ì¼ ìŠ¤ë ˆë“œë¡œ ì¸í•´ Bridgeë¥¼ í†µí•´ ë„¤ì´í‹°ë¸Œ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œ ê²°ê³¼ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ ë©”ì¸ ìŠ¤ë ˆë“œê°€ ë©ˆì¶° ì•± ë°˜ì‘ì„±ì´ ì €í•˜ë©ë‹ˆë‹¤. ì´ ì‹œê°„ ë™ì•ˆ UI ì—…ë°ì´íŠ¸, í„°ì¹˜ ì´ë²¤íŠ¸ ì²˜ë¦¬, ì• ë‹ˆë©”ì´ì…˜ì´ ëª¨ë‘ ì¤‘ë‹¨ë˜ëŠ” ë¬¸ì œê°€ ìžˆìŠµë‹ˆë‹¤.   
ì´ëŸ¬í•œ ë¬¸ì œ ë•Œë¬¸ì— ì•±ì´ ì•ˆì •ì ìœ¼ë¡œ 60FPSë¥¼ ë‹¬ì„±í•˜ê¸° ì–´ë ¤ì› ìŠµë‹ˆë‹¤. 60FPSëŠ” ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ì˜ ê¸°ì¤€ì¸ë°, ì´ë¥¼ ë‹¬ì„±í•˜ì§€ ëª»í•˜ë©´ ì‚¬ìš©ìžê°€ ì•±ì´ ëŠë¦¬ë‹¤ê³  ëŠë¼ê²Œ ë©ë‹ˆë‹¤.   

ì´ì „ ì•„í‚¤í…ì²˜ì—ì„œëŠ” ì´ëŸ¬í•œ ê·¼ë³¸ì ì¸ ë¬¸ì œë¡œ ì¸í•´ react 18ì—ì„œ ì§€ì›í•˜ëŠ” ë™ì‹œì„± ê¸°ëŠ¥ë“¤ì„ ì œëŒ€ë¡œ ì§€ì›í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

## â“ ê·¸ëž˜ì„œ new architectureëŠ” ì´ëŸ¬í•œ ë¬¸ì œë¥¼ ì–´ë–»ê²Œ ê°œì„ í•˜ì˜€ë‚˜?

bridgeë¥¼ ì™„ì „ ì œê±°í•˜ê³ , **JSI(JavaScript Interface)** ë¥¼ í†µí•´ ë¹„ë™ê¸°ì ì¸ í†µì‹ ì„ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤. JavaScriptì™€ ë„¤ì´í‹°ë¸Œ ì½”ë“œ ê°„ ì§ì ‘ì ì´ê³  ë™ê¸°ì ì¸ ìƒí˜¸ìž‘ìš©ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ê³ , ê¸°ì¡´ì˜ bridgeë¥¼ í†µí•œ ì§ë ¬í™”ëœ ë¹„ë™ê¸° í˜¸ì¶œì— ì˜ì¡´í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ ë™ê¸°ì ìœ¼ë¡œ ê°€ëŠ¥í•œ ì´ìœ ëŠ” ë„¤ì´í‹°ë¸Œ ë©”ì„œë“œë“¤ì´ react nativeê°€ ìž‘ë™í•˜ëŠ” í˜„ìž¬ ì‹¤í–‰ ì¤‘ì¸ JavaScript ì—”ì§„ì— ë“±ë¡ë˜ì–´ì„œ ì§ì ‘ í˜¸ì¶œí•  ìˆ˜ ìžˆê²Œ ë©ë‹ˆë‹¤. ë•Œë¬¸ì— ë¸Œë¦¬ì§€ê°€ ì—†ì–´ì„œ ë§¤ìš° ë¹ ë¦…ë‹ˆë‹¤.

> JSIê°€ ë™ê¸°ì ìœ¼ë¡œ ë™ìž‘í•  ìˆ˜ ìžˆëŠ” ì´ìœ ëŠ” JavaScript ëŸ°íƒ€ìž„(Hermes, V8)ê³¼ Native ì½”ë“œê°€ ëª¨ë‘ ë™ì¼í•œ C++ ë©”ëª¨ë¦¬ ê³µê°„ì—ì„œ ì‹¤í–‰ë˜ì–´ ì§ì ‘ì ì¸ ë©”ëª¨ë¦¬ ì°¸ì¡°ë¥¼ í†µí•´ í†µì‹ í•˜ê¸° ë•Œë¬¸ìž…ë‹ˆë‹¤.    
> HostObjectê°€ C++ ë©”ëª¨ë¦¬ì—ì„œ ê´€ë¦¬ë˜ê³  JS ëŸ°íƒ€ìž„ì— ì˜í•´ ì§ì ‘ ì°¸ì¡°ë˜ê¸° ë•Œë¬¸ì—, ì§ë ¬í™”ë‚˜ ì—­ì§ë ¬í™”ê°€ í•„ìš” ì—†ìŠµë‹ˆë‹¤. JavaScriptê°€ HostObjectì˜ ë©”ì„œë“œë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ê³ , ë°˜í™˜ê°’ì€ JS íƒ€ìž…(jsi::Value)ìœ¼ë¡œ ë§¤í•‘ë©ë‹ˆë‹¤.   
> ì´ëŠ” ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ JavaScriptê°€ DOM APIë¥¼ ë™ê¸°ì ìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ” ê²ƒê³¼ ë³¸ì§ˆì ìœ¼ë¡œ ë™ì¼í•œ ë©”ì»¤ë‹ˆì¦˜ìž…ë‹ˆë‹¤.

old architectureì—ì„œì˜ ì•± ì‹œìž‘ì‹œ ì‚¬ìš©í•˜ì§€ë„ ì•Šì„ native ëª¨ë“ˆë“¤ì„ ëª¨ë‘ ëª¨ë”œí•˜ì—¬ ì•± ì‹œìž‘ ì‹œê°„ì´ ê¸¸ì–´ì§€ê³  ë¶ˆí•„ìš”í•œ ë©”ëª¨ë¦¬ ì‚¬ìš© ë° ë°°í„°ë¦¬ ì†Œëª¨ê°€ ì¦ê°€í•˜ëŠ” ë¬¸ì œê°€ ìžˆì—ˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë¬¸ì œë¥¼ **TurboModules**ë¥¼ í†µí•´ ë„¤ì´í‹°ë¸Œ ëª¨ë“ˆì´ ë“±ë¡ë˜ê³  ì ‘ê·¼ë˜ëŠ” ë°©ì‹ì„ ìž¬êµ¬ì„±í•˜ì—¬, ì§€ì—° ë¡œë”©ê³¼ íš¨ìœ¨ì ì¸ ì´ˆê¸°í™”ë¥¼ í•  ìˆ˜ ìžˆë„ë¡ ê°œì„ í•˜ì˜€ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ í•„ìš” ì‹œì—ë§Œ ì´ˆê¸°í™”ê°€ ê°€ëŠ¥í•˜ì—¬ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ëª¨ë“ˆì„ ë¡œë“œí•˜ì§€ ì•Šì•„ ì•± ë¡œë“œ ì‹œê°„ì„ ì¤„ì¼ ìˆ˜ ìžˆì—ˆìŠµë‹ˆë‹¤.   

old architectureì—ì„œ ë ˆì´ì•„ì›ƒì´ ë¹„ë™ê¸°ì ì´ì—¬ì„œ ë Œë”ë§ëœ ë·°ë¥¼ ìž„ë² ë“œí•  ë•Œ ë ˆì´ì•„ì›ƒ ì í”„ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. new architectureì—ì„œëŠ” `useLayoutEffect` hookì„ ì‚¬ìš©í•˜ì—¬ ë ˆì´ì•„ì›ƒ ì—…ë°ì´íŠ¸ë¥¼ ë™ê¸°ì ìœ¼ë¡œ ì¸¡ì •í•˜ê³  ì ìš©í•  ìˆ˜ ìžˆì–´ì„œ ì‹œê°ì  ì í”„ë¥¼ í”¼í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë¬¸ì œë¥¼ **Fabric ë Œë”ëŸ¬**ê°€ í•´ê²°í•´ì£¼ì—ˆëŠ”ë° fabricì€ ë˜í•œ ë™ì‹œ ë Œë”ë§ì„ ì§€ì›í•˜ì—¬ UI ì—…ë°ì´íŠ¸ê°€ ë©”ì¸ ìŠ¤ë ˆë“œë¥¼ ë¸”ë¡œí‚¹í•˜ì§€ ì•Šê³  ì¼ì‹œì •ì§€, ìž¬ê°œ, ë˜ëŠ” ì¤‘ë‹¨ë  ìˆ˜ ìžˆê²Œ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ í•´ê²° ë•ë¶„ì— react native ì•±ì´ ì´ì œ ì—¬ëŸ¬ ui ì—…ë°ì´íŠ¸ë¥¼ ë™ì‹œì— ì²˜ë¦¬í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ë˜í•œ fabricì€ ì–´ë–¤ UIì—…ë°ì´íŠ¸ê°€ ìš°ì„ ìˆœìœ„ë¥¼ ê°€ì ¸ì•¼ í•˜ê³  ì–´ë–¤ ì—…ë°ì´íŠ¸ê°€ ê¸°ë‹¤ë ¤ì•¼ í•˜ëŠ”ì§€ ê²°ì •í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.   
fabric ì•„í‚¤í…ì²˜ì—ì„œ ìŠ¤í¬ë¡¤ì´ë‚˜ íƒ­ ê°™ì€ ì‚¬ìš©ìž ìƒí˜¸ìž‘ìš©ì— ìµœìš°ì„  ìˆœìœ„ë¥¼ ë¶€ì—¬í•˜ì—¬ ì´ëŸ¬í•œ ìž‘ì—…ë“¤ì€ ì¦‰ì‹œ ì²˜ë¦¬ë˜ëŠ” ë°˜ë©´, API ìš”ì²­ ê°™ì€ ëœ ê¸´ê¸‰í•œ ìž‘ì—…ë“¤ì€ í•˜ë‚˜ì”© ë‚®ì€ ìš°ì„ ìˆœìœ„ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.   
fabricì€ ë˜í•œ react suspense, react nativeì—ì„œ react ë™ì‹œ ê¸°ëŠ¥ í™œì„±í™”, ìžë™ ë°°ì¹­, `useTransition`ê³¼ `useDeferredValue`ë¥¼ react 18ì— ë„ìž…ëœ ê¸°ëŠ¥ë“¤ì„ í™œìš©í•  ìˆ˜ ìžˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

ì¶”ê°€ì ìœ¼ë¡œ Codegen ê¸°ëŠ¥ë„ ì¶”ê°€ë˜ì—ˆëŠ”ë° ì´ëŠ”, ê¸°ì¡´ì— javascriptì˜ íƒ€ìž…ê³¼ ë„¤ì´í‹°ë¸Œê°„ì˜ íƒ€ìž…ì´ ë‹¤ë¥¸ ë¬¸ì œë¡œ ì¸í•´ ì•ˆì •ì„±ì„ ë³´ìž¥í•˜ì§€ ëª»í•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•©ë‹ˆë‹¤. Codegenì€ ë¹Œë“œ ì‹œì ì— JavaScript ì¸í„°íŽ˜ì´ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬ íƒ€ìž… ì•ˆì „ì„± ë¬¸ì œë¥¼ í•´ê²°í•©ë‹ˆë‹¤. ì´ ì¸í„°íŽ˜ì´ìŠ¤ë“¤ì€ ë„¤ì´í‹°ë¸Œ ì½”ë“œê°€ JavaScript ë ˆì´ì–´ì—ì„œ ì „ë‹¬ëœ ë°ì´í„°ì™€ ë™ê¸°í™”ëœ ìƒíƒœë¡œ ìœ ì§€ë˜ë„ë¡ ë³´ìž¥í•©ë‹ˆë‹¤.   

> - https://reactnative.dev/architecture/overview
> - https://www.openxcell.com/blog/react-native-new-architecture/
> - https://reactnative.dev/blog/2024/10/23/the-new-architecture-is-here
> - https://github.com/anisurrahman072/React-Native-Advanced-Guide/blob/master/New-Architecture/New-Architecture-in-depth.md
> - https://medium.com/@harshitkishor2/react-native-new-architecture-77335db7034f
> - https://medium.com/@DhruvHarsora/deep-dive-into-react-natives-new-architecture-jsi-turbomodules-fabric-yoga-234bbdf853b4
> - https://engineering.rently.com/react-native-fabric-architecture/
> - https://www.brilworks.com/blog/react-native-fabric/
> - https://blog.logrocket.com/react-native-new-architecture-sync-async-rendering/

## â“ react nativeì˜ animatedì™€ react-native-reanimatedì˜ ì°¨ì´
React NativeëŠ” Animated APIëŠ” ê¸°ë³¸ì ìœ¼ë¡œ JavaScript ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰ë˜ì§€ë§Œ, `useNativeDiver: true` ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ë„¤ì´í‹°ë¸Œ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ë„¤ì´í‹°ë¸Œ ë“œë¼ì´ë²„ ì‚¬ìš© ì‹œì—ë„ ëª¨ë“  ì†ì„±ì´ ì§€ì›ë˜ì§€ëŠ” ì•ŠëŠ” ë‹¨ì ì´ ìžˆìŠµë‹ˆë‹¤. ë¹„ë ˆì´ì•„ì›ƒ ì†ì„±ë§Œ ì• ë‹ˆë©”ì´ì…˜í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.(`transform`ê³¼ `opacity`ëŠ” ìž‘ë™í•˜ì§€ë§Œ `Flexbox`ì™€ `position` ì†ì„±ì€ ìž‘ë™í•˜ì§€ ì•ŠìŒ.)   

ê·¸ì— ë¹„í•´ react native reanimatedëŠ” ê¸°ë³¸ì ìœ¼ë¡œ UI ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰ë˜ë©°, javascript ìŠ¤ë ˆë“œì— ë¶€í•˜ë¥¼ ìƒì„±í•˜ì§€ ì•Šê³  ëª¨ë“  ë„¤ì´í‹°ë¸Œ ì†ì„±ì˜ ì• ë‹ˆë©”ì´ì…˜ì„ ì§€ì›í•©ë‹ˆë‹¤.   ë˜í•œ, Animated API ê°™ì€ ê²½ìš° 60FPSì—ì„œ ì• ë‹ˆë©”ì´ì…˜ì„ ìˆ˜í–‰í•˜ë„ë¡ í•˜ë“œì½”ë”©ë˜ì–´ ìžˆì–´ ê·¸ ì´ìƒì˜ ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ì´ ì œí•œì ì´ì§€ë§Œ, reanimatedëŠ” ìµœëŒ€ 120FPS ì´ìƒì˜ ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.   

ReanimatedëŠ” React Nativeì˜ ë©”ì¸ JavaScript ìŠ¤ë ˆë“œë¥¼ ì™„ì „ížˆ ìš°íšŒí•˜ì—¬ ì• ë‹ˆë©”ì´ì…˜ì„ ì‹¤í–‰í•  ìˆ˜ ìžˆê²Œ í•©ë‹ˆë‹¤. ì• ë‹ˆë©”ì´ì…˜ ëŸ¬ë„ˆê°€ ì™„ì „ížˆ ê²©ë¦¬ë˜ì–´ ìžˆì–´ì„œ, ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§(ì»´í¬ë„ŒíŠ¸ ë Œë”ë§, ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ë° ì²˜ë¦¬ ë“±)ì´ ì• ë‹ˆë©”ì´ì…˜ ì„±ëŠ¥ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤.   

ì¶”ê°€ì ìœ¼ë¡œ react native reanimatedì—ëŠ” workletsì˜ ê°œë…ì´ ìžˆëŠ”ë° workletsì€ UI ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰ë˜ëŠ” JavaScript í•¨ìˆ˜ìž…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë¸Œë¦¬ì§€ ë¹„ìš©ì„ ê±±ì •í•˜ì§€ ì•Šê³  javascriptë¡œ ë„¤ì´í‹°ë¸Œ ìˆ˜ì¤€ì˜ ì• ë‹ˆë©”ì´ì…˜ ëª…ë ¹ì„ ì •ì˜í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ê¸°ëŠ¥ì€ ë§¤ìš° ê°•ë ¥í•˜ì§€ë§Œ, ì¶”ë¡ í•˜ê¸° ì–´ë ¤ìš¸ ìˆ˜ ìžˆëŠ”ê²Œ ë‹¨ì ìž…ë‹ˆë‹¤.   

ë˜í•œ, react native reanimated shared valueëŠ” `Animated.Values`ì™€ ë¹„êµí•  ìˆ˜ ìžˆëŠ”ë° ì´ë“¤ì€ "ì• ë‹ˆë©”ì´ì…˜ ê°€ëŠ¥í•œ" ë°ì´í„°ë¥¼ ìš´ë°˜í•˜ê³ , ë°˜ì‘ì„±ì˜ ê°œë…ì„ ì œê³µí•˜ë©°, ì• ë‹ˆë©”ì´ì…˜ì„ êµ¬ë™í•˜ëŠ” ìœ ì‚¬í•œ ëª©ì ì„ ì œê³µí•©ë‹ˆë‹¤.   
shared valuesê°€ í•„ìš”í•œ ì´ìœ ëŠ” ê³µìœ  ë©”ëª¨ë¦¬ ê°œë…ì„ ì œê³µí•˜ëŠ” ê²ƒìž…ë‹ˆë‹¤. `useSharedValue`ë¥¼ ì‚¬ìš©í•˜ì—¬ shared valueë¥¼ ìƒì„±í•˜ë©´, ë„¤ì´í‹°ë¸Œ ì¸¡ì— ë©”ëª¨ë¦¬ ë¸”ë¡ì„ í• ë‹¹í•˜ê³  ê±°ê¸°ì— ê°’ì„ ì €ìž¥í•©ë‹ˆë‹¤.    

> ë„¤ì´í‹°ë¸Œ ì¸¡ì˜ ì •í™•í•œ ìœ„ì¹˜ëŠ” worklet runtime(UI ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰ë˜ëŠ” ë³„ë„ì˜ javascript ëŸ°íƒ€ìž„), JSI C++ Layer(ìŠ¤ë ˆë“œ ê°„ í†µì‹ ê³¼ ë©”ëª¨ë¦¬ ê´€ë¦¬ë¥¼ ë‹´ë‹¹í•˜ëŠ” C++ ë ˆì´ì–´), ì‹¤ì œ ë„¤ì´í‹°ë¸Œ í”Œëž«í¼(iOS/Androidì˜ ë„¤ì´í‹°ë¸Œ UI ì‹œìŠ¤í…œ)ìœ¼ë¡œ Shared Valueì˜ ì‹¤ì œ ë°ì´í„°ëŠ” **Worklet Runtime**ì— ì €ìž¥ë˜ë©°, **JSI C++ ë ˆì´ì–´**ë¥¼ í†µí•´ React Native JS ìŠ¤ë ˆë“œì™€ ë™ê¸°í™”ë©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì• ë‹ˆë©”ì´ì…˜ì´ Reactì˜ ë Œë”ë§ ì‚¬ì´í´ê³¼ ë…ë¦½ì ìœ¼ë¡œ UI ìŠ¤ë ˆë“œì—ì„œ ë¶€ë“œëŸ½ê²Œ ì‹¤í–‰ë  ìˆ˜ ìžˆëŠ” ê²ƒìž…ë‹ˆë‹¤.

ê·¸ë ‡ê¸° ë•Œë¬¸ì— shared valuesëŠ” UI ìŠ¤ë ˆë“œì—ì„œ ì—…ë°ì´íŠ¸ë˜ê³  ì½ížˆë„ë¡ ìµœì í™”ë˜ì–´ ìžˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ UIìŠ¤ë ˆë“œì—ì„œ ìˆ˜í–‰ë˜ëŠ” ì½ê¸°ì™€ ì“°ê¸°ëŠ” ëª¨ë‘ ë™ê¸°ì ìž…ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ëŸ¬í•œ ì„ íƒìœ¼ë¡œ JS ìŠ¤ë ˆë“œì—ì„œ ìˆ˜í–‰ëœ ì—…ë°ì´íŠ¸ëŠ” ëª¨ë‘ ë¹„ë™ê¸°ì ìž…ë‹ˆë‹¤. ì—…ë°ì´íŠ¸ëŠ” ì¦‰ì‹œ ì´ë£¨ì–´ì§€ëŠ” ëŒ€ì‹ , Reanimated ì½”ì–´ëŠ” UI ìŠ¤ë ˆë“œì—ì„œ ìˆ˜í–‰ë  ì—…ë°ì´íŠ¸ë¥¼ ìŠ¤ì¼€ì¤„ë§í•˜ì—¬ ë™ì‹œì„± ë¬¸ì œë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.   
ì´ëŸ¬í•œ ì´ìœ ëŠ” shared valueëŠ” ë‹¨ìˆœí•œ javascript ê°ì²´ì´ë¯€ë¡œ ì¼ë°˜ì ì¸ React ë¦¬ë Œë”ë¥¼ íŠ¸ë¦¬ê±°í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ê²ƒì´ ë°”ë¡œ Shared Valuesê°€ ì„±ëŠ¥ìƒ ì´ì ì„ ì œê³µí•˜ëŠ” í•µì‹¬ ì´ìœ ë¡œ, ì• ë‹ˆë©”ì´ì…˜ ê°’ì´ ë³€ê²½ë˜ì–´ë„ React ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ì• ë‹ˆë©”ì´ì…˜ì´ Reactì˜ ë Œë”ë§ ì‚¬ì´í´ê³¼ ë…ë¦½ì ìœ¼ë¡œ UI ìŠ¤ë ˆë“œì—ì„œ ë¶€ë“œëŸ½ê²Œ ì‹¤í–‰ë  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.  

> - https://docs.swmansion.com/react-native-reanimated/docs/guides/worklets
> - https://github.com/software-mansion/react-native-reanimated/discussions/7264
> - https://docs.swmansion.com/react-native-reanimated/docs/core/useSharedValue

## â“ FlatListëž‘ ScrollViewì˜ ì°¨ì´ëŠ” ë¬´ì—‡ì´ê³  ì–´ë–¤ ìƒí™©ì—ì„œ ì‚¬ìš©í•˜ëŠ”ì§€?
ScrollViewëŠ” ëª¨ë“  ìžì‹ ì»´í¬ë„ŒíŠ¸ë¥¼ í•œ ë²ˆì— ë Œë”ë§í•˜ë©°, í™”ë©´ì— ë³´ì´ì§€ ì•ŠëŠ” ìš”ì†Œë“¤ë„ ëª¨ë‘ ë©”ëª¨ë¦¬ì— ë¡œë“œí•©ë‹ˆë‹¤. ë•Œë¬¸ì— ëª¨ë“  ì•„ì´í…œì„ í•œ ë²ˆì— ë Œë”ë§í•˜ë¯€ë¡œ ì´ˆê¸° ë Œë”ë§ ì‹œê°„ì´ ê¸¸ì–´ì§€ê³  ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ì¦ê°€í•©ë‹ˆë‹¤. ê·¸ëž˜ì„œ ScrollViewëŠ” ìž‘ê³  ê³ ì •ëœ ê°œìˆ˜ì˜ ì•„ì´í…œì„ í‘œì‹œí•˜ê±°ë‚˜ ì •ì ì¸ ì½˜í…ì¸ ì¼ ê²½ìš°ì— ì‚¬ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ë°˜ë©´ì— FlatListëŠ” ê°€ìƒ ìŠ¤í¬ë¡¤ë§ì„ ì‚¬ìš©í•˜ì—¬ í˜„ìž¬ ë³´ì´ëŠ” ì•„ì´í…œë“¤ë§Œ ë Œë”ë§í•˜ê³ , í™”ë©´ì—ì„œ ë²—ì–´ë‚œ ì•„ì´í…œë“¤ì€ ë¹ˆê³µê°„ìœ¼ë¡œ ì²˜ë¦¬í•˜ì—¬, ê¸°ë³¸ì ìœ¼ë¡œ 10ê°œ ì•„ì´í…œë§Œ ë Œë”ë§í•˜ê³  ìŠ¤í¬ë¡¤í•  ë•Œë§ˆë‹¤ í•„ìš”í•œ ì•„ì´í…œì„ ë™ì ìœ¼ë¡œ ë¡œë“œí•˜ì—¬ ë©”ëª¨ë¦¬ì— íš¨ìœ¨ì ìž…ë‹ˆë‹¤. ì´ëŸ¬í•œ íŠ¹ì„± ë–„ë¬¸ì— FlatListëŠ” í™”ë©´ì—ì„œ ë²—ì–´ë‚œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì–¸ë§ˆìš´íŠ¸í•˜ê³  ë‹¤ì‹œ ëŒì•„ì˜¬ ë•Œ ìž¬ìƒì„±í•˜ë¯€ë¡œ ë‚´ë¶€ ìƒíƒœê°€ ì´ˆê¸°í™”ë©ë‹ˆë‹¤. ë”°ë¼ì„œ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë‚˜ ë™ì  ë¦¬ìŠ¤íŠ¸ë¥¼ í‘œì‹œí•˜ê±°ë‚˜ ë¬´í•œ ìŠ¤í¬ë¡¤ì´ë‚˜ ì§€ì—° ë¡œë”©ì´ í•„ìš”í•  ë•Œ, ì„±ëŠ¥ ìµœì í™”ê°€ ì¤‘ìš”í•œ ê¸´ ë¦¬ìŠ¤íŠ¸ì¸ ê²½ìš°ì— ì‚¬ìš©í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤.

### ê·¸ë ‡ë‹¤ë©´, FlatListë³´ë‹¤ FlashList ì¢‹ë‹¤ëŠ”ë° FlashListëŠ” FlatListì˜ ì–´ë–¤ ë¬¸ì œë¥¼ ê°œì„ í•˜ì—¬ ì„±ëŠ¥ì´ ë” ì¢‹ì€ê±´ì§€?
FlatListëŠ” ê°€ìƒí™” ê¸°ìˆ ì„ ì‚¬ìš©í•˜ì—¬ í˜„ìž¬ ë³´ì´ëŠ” ì•„ì´í…œë“¤ë§Œ ë Œë”ë§í•˜ê³ , ë·°í¬íŠ¸ ì™¸ìš°ì˜ ì•„ì´í…œë“¤ì€ ì–¸ë§ˆìš´íŠ¸í•˜ì—¬ ë©”ëª¨ë¦¬ë¥¼ ì ˆì•½í•˜ê³  ì„±ëŠ¥ì„ í–¥ìƒ ì‹œí‚µë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ ë°©ì‹ì€ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§ˆìš´íŠ¸í•˜ê³  ì–¸ë§ˆìš´íŠ¸í•˜ëŠ” ê³¼ì •ì—ì„œ ë””ë°”ì´ìŠ¤ ë¦¬ì†ŒìŠ¤ë¥¼ ì†Œëª¨í•˜ëŠ” ì˜¤ë²„í—¤ë“œê°€ ë°œìƒí•©ë‹ˆë‹¤.   

ì´ëŸ¬í•œ ë¬¸ì œë¥¼ FlashListëŠ” ê°€ìƒí™” ëŒ€ì‹  Cell Recycling ì „ëžµì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ë©”ëª¨ë¦¬ì— ê³ ì •ëœ ì»´í¬ë„ŒíŠ¸ ì¸ìŠ¤í„´ìŠ¤ í’€ì„ ìœ ì§€í•˜ê³ , ì•„ì´í…œì´ í™”ë©´ì—ì„œ ë²—ì–´ë‚  ë•Œ ê°™ì€ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒˆë¡œìš´ ë°ì´í„°ë¡œ ìž¬ì‚¬ìš©í•©ë‹ˆë‹¤. ë³´ì´ì§€ ì•ŠëŠ” ì•„ì´í…œì€ ë©”ëª¨ë¦¬ì—ì„œ í•´ì œí•˜ëŠ” ê²ƒì€ ë” ë§Žì€ ê°ì²´ ìƒì„±ê³¼ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì„ ìœ ë°œí•˜ë¯€ë¡œ, FlashListëŠ” ë¦¬ì‚¬ì´í´ë§ì´ ì„±ëŠ¥ì´ë‚˜ ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±ì„ ì†ìƒì‹œí‚¤ì§€ ì•Šìœ¼ë©´ì„œ ë¬´í•œ ë¦¬ìŠ¤íŠ¸ë¥¼ ë Œë”ë§í•˜ëŠ” ìµœìƒì˜ ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.

### FlashListë¥¼ ì‚¬ìš©í• ë•Œ ì„±ëŠ¥ ìµœì í™” í•  ìˆ˜ ìžˆëŠ” íŒì´ ìžˆë‹¤ë©´?
FlashListëŠ” ë·°í¬íŠ¸ ë²—ì–´ë‚  ë•Œ ì»´í¬ë„ŒíŠ¸ê°€ íŒŒê´´ë˜ì§€ ì•Šê³  ë‹¤ë¥¸ item propìœ¼ë¡œ ë‹¤ì‹œ ë Œë”ë§ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ **ë¦¬ì‚¬ì´í´ë§ ì‹œ ê°€ëŠ¥í•œ í•œ ì ì€ ê²ƒë“¤ì´ ë‹¤ì‹œ ë Œë”ë§ë˜ê³  ìž¬ê³„ì‚°ë˜ë„ë¡ ìµœì í™”**í•´ì•¼ í•©ë‹ˆë‹¤.   

ì•„ì´í…œ ë‚´ë¶€ì— key propì´ ìžˆë‹¤ë©´ ì œê±°í•˜ëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤. reactì—ì„œëŠ” list itemì— keyë¥¼ ì„¤ì •í•˜ëŠ”ê²ƒì„ ê¶Œìž¥í•˜ì§€ë§Œ FlashListì˜ í•µì‹¬ ì„±ëŠ¥ ì´ì ì€ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•˜ê³  íŒŒê´´í•˜ëŠ” ê²ƒ ëŒ€ì‹  ìž¬í™œìš©í•˜ëŠ” ê²ƒì¸ë°, ì„œë¡œ ë‹¤ë¥¸ ë°ì´í„° ì•„ì´í…œ ê°„ì— ë³€ê²½ë˜ëŠ” key propì„ ì¶”ê°€í•˜ë©´ reactê°€ ì»´í¬ë„ŒíŠ¸ë¥¼ ì™„ì „ížˆ ë‹¤ë¥¸ ê²ƒìœ¼ë¡œ ì·¨ê¸‰í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ë¥¼ ì™„ì „ížˆ ìž¬ìƒì„±í•˜ê²Œ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ FlashListì˜ ìž¬í™œìš©í•˜ëŠ” ì´ì ì„ ì œëŒ€ë¡œ ëˆ„ë¦´ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤.   

ì„œë¡œ ë‹¤ë¥¸ íƒ€ìž…ì˜ ì…€ ì»´í¬ë„ŒíŠ¸ê°€ ìžˆì„ë•Œ, `getItemType`ì„ í™œìš©í•´ì„œ ì„œë¡œ ë‹¤ë¥¸ íƒ€ìž…ì˜ ì•„ì´í…œì„ ìž¬í™œìš©í•˜ì§€ ì•Šì•„ ìž¬ë Œë”ë§ì´ ë” ë¹¨ë¼ì§‘ë‹ˆë‹¤.   

ì•„ì´í…œì— ì§ì ‘ ì˜ì¡´í•˜ì§€ ì•ŠëŠ” ë¬´ê±°ìš´ ì»´í¬ë„ŒíŠ¸ëŠ” `memo`ë¡œ ê°ìŒ‰ë‹ˆë‹¤.   

ë§Žì€ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê³„ì‚°ì´ ìžˆë‹¤ë©´ ë©”ëª¨ì´ì œì´ì…˜ì„ ê³ ë ¤í•˜ê±°ë‚˜ ë” ë¹ ë¥´ê²Œ ë§Œë“¤ê±°ë‚˜ ì™„ì „ížˆ ì œê±°í•˜ëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤.

> - https://shopify.github.io/flash-list/docs/fundamentals/performance/
> - https://shopify.github.io/flash-list/docs/recycling/
> - https://medium.com/@anisurrahmanbup/react-native-flashlist-performant-list-view-implementation-analysis-8b29df8f2560

## â“ React Nativeì˜ ë Œë”ë§ ê³¼ì • feat. virtual dom
ê°€ìƒ ë”ì€ ë¸Œë¼ìš°ì € ë…ë¦½ì ì¸ ë°©ì‹ìœ¼ë¡œ ë™ìž‘í•©ë‹ˆë‹¤. ë”°ë¼ì„œ virtual domì˜ ê°œë…ì€ react ë¿ë§Œ ì•„ë‹ˆë¼ React Nativeì™€ ê°™ì€ í”Œëž«í¼ì—ì„œë„ í™œìš©ë  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ê¸°ìˆ ê³¼ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìžˆìœ¼ë©°, ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ ë Œë”ë§í•  ìˆ˜ ìžˆë„ë¡ í•´ì¤ë‹ˆë‹¤.   
React Nativeì—ì„œë„ Reactì™€ ë§ˆì°¬ê°€ì§€ë¡œ virtual domì„ ì‚¬ìš©í•˜ì§€ë§Œ, ìµœì¢… ë Œë”ë§ ëŒ€ìƒì´ ì›¹ ë¸Œë¼ìš°ì €ì˜ DOMì´ ì•„ë‹Œ **ë„¤í‹°ì´ë¸Œ ì»´í¬ë„ŒíŠ¸**ë¼ëŠ” ì°¨ì´ê°€ ìžˆìŠµë‹ˆë‹¤.   

old architecture
1. javascript ì‹¤í–‰: javascript threadì—ì„œ react ì»´í¬ë„ŒíŠ¸ ë¡œì§ê³¼ UI ì—…ë°ì´íŠ¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
2. Bridgeë¥¼ í†µí•œ ë¹„ë™ê¸° í†µì‹ : JavaScriptì™€ Nativeê°„ í†µì‹ ì€ ë¹„ë™ê¸° Bridgeë¥¼ í†µí•´ ì´ë£¨ì–´ì¡Œìœ¼ë©°, ëª¨ë“  ë°ì´í„°ëŠ” JSON í˜•íƒœë¡œ ì§ë ¬í™”ë˜ì–´ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.
3. Shadow Threadì—ì„œ ë ˆì´ì•„ì›ƒ ê³„ì‚°: Shadow Threadì—ì„œ Yoga Engineì„ ì‚¬ìš©í•´ Flexbox ìŠ¤íƒ€ì¼ì„ ë„¤ì´í‹°ë¸Œ ë ˆì´ì•„ì›ƒìœ¼ë¡œ ë³€í™˜í•˜ê³  ìœ„ì¹˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.
4. Native UI ë Œë”ë§: Native Threadì—ì„œ ê³„ì‚°ëœ ë ˆì´ì•„ì›ƒì„ ë°”íƒ•ìœ¼ë¡œ ì‹¤ì œ ë„¤ì´í‹°ë¸Œ ì»´í¬ë„ŒíŠ¸ë¥¼ íšŒë©´ì— ë Œë”ë§í•©ë‹ˆë‹¤.

Old architectureëŠ” bridge í†µì‹ ê³¼ ëª¨ë“  ë°ì´í„° ì§ë ¬í™”/ì—­ì§ë ¬í™”ë¡œ ì¸í•œ ì„±ëŠ¥ ì €í•˜ë¡œ ì¸í•´ ë³‘ëª©ë˜ì–´ 60+FPS ë‹¬ì„±ì´ ì–´ë ¤ì› ê³ , JavaScriptì™€ Native ë ˆì´ì–´ ê°„ ë™ê¸°í™” ë¬¸ì œë¡œ ì¸í•œ UI ì í”„ í˜„ìƒ, ë‹¨ì¼ ìŠ¤ë ˆë“œì—ì„œë§Œ ë ˆì´ì•„ì›ƒ ê³„ì‚°ì´ ê°€ëŠ¥í•œ ë¬¸ì œì ë“¤ì´ ìžˆì—ˆìŠµë‹ˆë‹¤.   

New architectureì—ì„œì˜ ë Œë”ë§ ê³¼ì •ì€ ë Œë”ëŸ¬ì¸ Fabricì´ ë‹´ë‹¹í•©ë‹ˆë‹¤.   

1. Render Phase:
   1. Reactê°€ JavaScriptì—ì„œ React Element Treeë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ëŠ” íšŒë©´ì— ë‚˜íƒ€ë‚  ë‚´ìš©ì„ ì„¤ëª…í•˜ëŠ” í‰ë²”í•œ JavaScript ê°ì²´ë“¤ìž…ë‹ˆë‹¤.
   2. Fabric ë Œë”ëŸ¬ê°€ React Element Treeë¥¼ ë°”íƒ•ìœ¼ë¡œ C++ì—ì„œ React Shadow Treeë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ê° React Shadow Node(ë¶ˆë³€ ê°ì²´)ëŠ” ë§ˆìš´íŠ¸ë  React Host Componentë¥¼ ë‚˜íƒ€ë‚´ë©°, JavaScriptì—ì„œ ì˜¨ Props ì •ë³´ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.
2. Commit Phase:
   1. Yoga ì—”ì§„ì´ ê° Shadow Nodeì˜ ë ˆì´ì•„ì›ƒì„ ê³„ì‚°í•©ë‹ˆë‹¤.
   2. Tree Promotionìœ¼ë¡œ ìƒˆë¡œìš´ Shadow Treeë¥¼ ë‹¤ìŒ ë§ˆìš´íŠ¸ ëŒ€ìƒìœ¼ë¡œ ìŠ¹ê²©ì‹œí‚µë‹ˆë‹¤.
3. Mount Phase:
   1. React Shadow Treeê°€ Host View Treeë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
   2. ì‹¤ì œ ë„¤ì´í‹°ë¸Œ ë·° ìƒì„± ë° í™”ë©´ì— ë§ˆìš´íŠ¸ í•©ë‹ˆë‹¤.

Old architectureì—ì„œëŠ” shadow threadì˜ ë°±ê·¸ë¼ìš´ë“œ ìŠ¤ë ˆë“œë¡œ UI ìš”ì†Œë“¤ì˜ ë ˆì´ì•„ì›ƒì„ ë Œë”ë§ ì „ì— ê³„ì‚°í•˜ëŠ” ì¤‘ìš”í•œ ìž‘ì—…ì„ ìˆ˜í–‰ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, new architectureì—ì„œëŠ” shadow threadê°€ ì œê±° ë˜ì—ˆëŠ”ë°, ê·¸ ì´ìœ ëŠ” ë©”ëª¨ë¦¬ ê³µìœ  ë°©ì‹ì— ë³€í™”ê°€ ìžˆì—ˆìŠµë‹ˆë‹¤.   
oldì—ì„œ javascriptì™€ native ìŠ¤ë ˆë“œì—ì„œ ê°€ê° ë³„ë„ì˜ ê³„ì¸µ/DOM ë…¸ë“œ ë³µì‚¬ë³¸ì„ ìœ ì§€í•˜ì—¬ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í–ˆì–´ì•¼ í–ˆëŠ”ë° New architectureì—ì„œëŠ” Fabric ë Œë”ëŸ¬ê°€ C++ ì„¸ê³„(UI ìŠ¤ë ˆë“œ)ì— ì¡´ìž¬í•˜ëŠ” ë Œë”ëŸ¬ë¡œ, Reactê°€ C++ì—ì„œ ìƒì„±í•œ virtual DOMì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ê°€ì§€ë©°, ê°ì²´ë“¤ì´ UI(ë„¤í‹°ì´ë¸Œ)ì™€ JS ìŠ¤ë ˆë“œ ê°„ì— ê³µìœ ë˜ì–´ Shadow Threadì˜ í•„ìš”ì„±ì„ ì œê±°í•©ë‹ˆë‹¤.

### ê·¸ë ‡ë‹¤ë©´ yoga engineì€ ë¬´ì—‡ì¸ê°€?
yogaëŠ” ìž„ë² ë“œ ê°€ëŠ¥í•œ í¬ë¡œìŠ¤ í”Œëž«í¼ ë ˆì´ì•„ì›ƒ ì—”ì§„ìœ¼ë¡œ Flexbox ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì¡Œìœ¼ë©°, **ë°•ìŠ¤ë“¤ì˜ í¬ê¸°ì™€ ìœ„ì¹˜ë§Œì„ ê²°ì •í•˜ëŠ” ê²ƒì´ ì£¼ëœ ì—­í• **ìž…ë‹ˆë‹¤. yoga ìžì²´ëŠ” UI í”„ë ˆìž„ì›Œí¬ê°€ ì•„ë‹ˆë©° ì§ì ‘ ê·¸ë¦¬ê¸° ìž‘ì—…ì€ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.   

yogaì˜ í•µì‹¬ ê¸°ëŠ¥ìœ¼ë¡œ Flexbox ë ˆì´ì•„ì›ƒ ì‹œìŠ¤í…œìœ¼ë¡œ Flexbox ë ˆì´ì•„ì›ƒ ëª¨ë¸ì„ êµ¬í˜„í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ì–´ë–»ê²Œ ìœ„ì¹˜í•˜ê³  í¬ê¸°ê°€ ì •í•´ì§€ëŠ”ì§€ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤. ë˜í•œ, í¬ë¡œìŠ¤ í”Œëž«í¼ ì§€ì›ìœ¼ë¡œ yogaëŠ” android, ios UIKit, .net, swift, c++ì˜ ì—¬ëŸ¿ í”Œëž«í¼ì„ ì§€ì›í•©ë‹ˆë‹¤.   

ë˜í•œ, yogaëŠ” ì„±ëŠ¥ì„ ê³ ë ¤í•˜ì—¬ ì„¤ê³„ë˜ì—ˆëŠ”ë°, ë ˆì´ì•„ì›ƒì„ ê³„ì‚°í•  ë•Œ í…ìŠ¤íŠ¸ ë·°ë‚˜ ë¼ë²¨ê³¼ ê°™ì´ ì¸¡ì •í•˜ëŠ”ë° ì‹œê°„ì´ ì˜¤ëž˜ ê±¸ë¦¬ëŠ” ìš”ì†Œë“¤ì„ ê°€ëŠ¥í•œ í•œ ì ê²Œ, ì´ìƒì ìœ¼ë¡œëŠ” í•œ ë²ˆë§Œ ì¸¡ì •í•˜ë„ë¡ ë³´ìž¥í•©ë‹ˆë‹¤.

## â“ react nativeì—ì„œ ê°œë°œí•  ë•Œ ë¹ˆ í™”ë©´ì´ ë‚˜ì˜¤ëŠ” ì—ëŸ¬ì˜ ì´ìœ ì™€ crashë‚˜ëŠ” ì—ëŸ¬ì˜ ì°¨ì´ëŠ”?
ë³´í†µ ë¹ˆ í™”ë©´ì´ ë‚˜ì˜¨ëŠ ê²½ìš°ì—ëŠ” JavaScriptì—ì„œ ë°œìƒí•˜ëŠ” ì—ëŸ¬ê°€ ì¼ë°˜ì ìž…ë‹ˆë‹¤. ë˜ëŠ” apiê°€ í˜¸ì¶œì— ì‹¤íŒ¨í•˜ì—¬ ë¹ˆí™”ë©´ì´ ë…¸ì¶œë  ìˆ˜ë„ ìžˆê±°ë‚˜, ë²ˆë“¤ë§ ë¬¸ì œë„ ë°œìƒí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ ê²½ìš°ì—ëŠ” ì•±ì€ ì‹¤í–‰ì¤‘ì´ì§€ë§Œ UIê°€ ì—†ëŠ” ê²½ìš°ë¼ ErrorBoundaryë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ JS ë””ë²„ê±°ë¥¼ í™œìš©í•˜ì—¬ ë””ë²„ê¹…ì„ í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.   

crashê°€ ë‚˜ëŠ” ì—ëŸ¬ì¸ ê²½ìš°ì—ëŠ” ë„¤ì´í‹°ë¸Œ ëª¨ë“ˆì— ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ê²½ìš°ë‚˜ ë©”ëª¨ê°€ ë¶€ì¡±í•˜ì—¬ ì—ëŸ¬ê°€ ë‚˜ëŠ” ê²½ìš° ìž…ë‹ˆë‹¤. ì•±ì´ crashê°€ ë‚˜ëŠ” ê²½ìš°ì—ëŠ” ì•±ì´ ì™„ì „ížˆ ì¢…ë£Œë˜ì–´ í™ˆ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ë©° ë„¤ì´í‹°ë¸Œ í¬ëž˜ì‹œ ë¡œê·¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ ê²½ìš°ì—ëŠ” ê° osë³„ë¡œ í¬ëž˜ì‹œê°€ ë°œìƒí•˜ëŠ” í¬ëž˜ì‹œ ë¡œê·¸ë¥¼ í™•ì¸í•˜ì—¬ ì—ëŸ¬ë¥¼ í™•ì¸í•˜ê±°ë‚˜ ë©”ë¡œë¦¬ ê´€ë ¨ í¬ëž˜ì‹œ ì¸ ê²½ìš°ì—ëŠ” react-native-performanceì˜ ë„êµ¬ë¥¼ í™œìš©í•˜ì—¬ ë©”ë¡œë¦¬ ê´€ë ¨ í¬ëž˜ì‹œë¥¼ íŒŒì•…í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. í”„ë¡œë•ì…˜ í¬ëž˜ì‹œ ëŒ€ì‘ìœ¼ë¡œëŠ” sentryì™€ ê°™ì€ ë¦¬í¬íŒ…ë¥¼ í™œìš©í•˜ì—¬ ë””ë²„ê¹…í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

## â“ code push(OTA)ì˜ ë™ìž‘ ì›ë¦¬
code pushëŠ” javascript ì½”ë“œì™€ ì—ì…‹ì„ ì•± ìŠ¤í† ì–´ ì‹¬ì‚¬ ê³¼ì • ì—†ì´ ì§ì ‘ ì‚¬ìš©ìž ê¸°ê¸°ì— ì—…ë°ì´íŠ¸í•  ìˆ˜ ìžˆê²Œ í•´ì£¼ëŠ” over-the-air(OTA) ì—…ë°ì´íŠ¸ ë„êµ¬ìž…ë‹ˆë‹¤.   

React Native ì•±ì€ JavaScript íŒŒì¼ê³¼ ì´ë¯¸ì§€ ë“±ì˜ ì—ì…‹ìœ¼ë¡œ êµ¬ì„±ë˜ë©°, ì´ë“¤ì€ metro bundlerì— ì˜í•´ ë²ˆë“¤ë§ë˜ì–´ í”Œëž«í¼ë³„ ë°”ì´ë„ˆë¦¬ì˜ ì¼ë¶€ë¡œ ë°°í¬ë©ë‹ˆë‹¤.   
ê·¸ë ‡ê¸° ë–„ë¬¸ì— JavaScript íŒŒì¼ ë³€ê²½ì‚¬í•­ê³¼ ì—ì…‹ë§Œ ì—…ë°ì´íŠ¸ê°€ ê°€ëŠ¥í•˜ë©´, ì´ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ ìƒˆë¡œê³ ì¹¨ì„ í†µí•´ ë³€ê²½ì‚¬í•­ì„ ë³¼ ìˆ˜ ìžˆëŠ” ê²ƒê³¼ ìœ ì‚¬í•©ë‹ˆë‹¤.   

1. ê°œë°œìžê°€ ì—…ë°ì´íŠ¸ë¥¼ ìƒì„±: CLIë¥¼ í†µí•´ ë³€ê²½ëœ JavaScript ì½”ë“œì™€ ì—ì…‹ì„ CodePush ì„œë²„ì— ì—…ë¡œë“œ
2. ì•±ì´ ì—…ë°ì´íŠ¸ í™•ì¸: ì•± ì‹¤í–‰ì‹œ CodePush ì„œë²„ì— ìƒˆ ì—…ë°ì´íŠ¸ê°€ ìžˆëŠ”ì§€ í™•ì¸
3. ì°¨ë“± ë‹¤ìš´ë¡œë“œ: CodePushëŠ” ì°¨ë“± ì—…ë°ì´íŠ¸ë¥¼ ì§€ì›í•˜ì—¬ ì‚¬ìš©ìžê°€ ì‹¤ì œë¡œ í•„ìš”í•œ íŒŒì¼ë§Œ ë‹¤ìš´ë¡œë“œê°€ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.
4. ì—…ë°ì´íŠ¸ ì ìš©: ë‹¤ìš´ë¡œë“œëœ ì—…ë°ì´íŠ¸ë¥¼ ë‹¤ìŒ ì•± ìž¬ì‹œìž‘ ì‹œ ì ìš© & ì¦‰ì‹œ ì ìš©

ì´ëŸ¬í•œ ìž¥ì ìœ¼ë¡œ ì¸í•´ ì•± ì—…ë°ì´íŠ¸ì—†ì´ ë¹ ë¥¸ ê°œë°œ ë° ë°°í¬ê°€ ê°€ëŠ¥í•˜ë©° ì‚¬ìš©ìžê°€ ìˆ˜ë™ìœ¼ë¡œ ì•±ì„ ì—…ë°ì´íŠ¸í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë§Œ, JavaScript ì½”ë“œì— ëŒ€í•´ì„œë§Œ ê°€ëŠ¥í•˜ë©° ë„¤í‹°ì´ë¸Œ ì½”ë“œ ë³€ê²½ì‹œ ì•± ì—…ë°ì´íŠ¸ê°€ í•„ìˆ˜ìž…ë‹ˆë‹¤.

## â“ React Nativeì—ì„œì˜ `StyleSheet.create`ì™€ ì¼ë°˜ JavaScript ê°ì²´ì˜ ì°¨ì´ì 
ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì— ì„ ì–¸ëœ ì¼ë°˜ ê°ì²´ì™€ `StyleSheet.create` ì‚¬ì´ì—ëŠ” ì„±ëŠ¥ìƒ ì°¨ì´ê°€ ì—†ìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ `StyleSheet.create`ì˜ ë‚´ë¶€ êµ¬í˜„ì„ ë³´ë©´, ê°ì²´ë¥¼ ë°›ì•„ì„œ ê·¸ëŒ€ë¡œ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” ë‹¨ìˆœí•œ êµ¬ì¡°ìž…ë‹ˆë‹¤.   
ê·¸ë ‡ì§€ë§Œ `StyleSheet.create`ë¥¼ ì‚¬ìš©í•˜ë©´ ì½”ë“œë¥¼ ì´í•´í•˜ê¸° ì‰½ê°€ ë§Œë“¤ê³ , ìŠ¤íƒ€ì¼ì— ì˜ë¯¸ ìžˆëŠ” ì´ë¦„ì„ ë¶€ì—¬í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ë˜í•œ, typescript ì‚¬ìš©ì‹œ íƒ€ìž… ê²€ì¦ì„ ì œê³µí•©ë‹ˆë‹¤.

ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ì„ ì‚¬ìš©í•˜ë©´ ë Œë”ë§í•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ê°ì²´ê°€ ìƒì„±ë˜ì–´ ì„±ëŠ¥ ì €í•˜ê°€ ë°œìƒí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ ì‚¬ìš©ì„ ì§€ì–‘í•˜ê³  `StyleSheet.create`ë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤.

> - https://blog.theodo.com/2023/10/why-use-rn-stylesheets/
> - https://stackoverflow.com/questions/38958888/react-native-what-is-the-benefit-of-using-stylesheet-vs-a-plain-object
> - https://reactnative.dev/docs/stylesheet.html
